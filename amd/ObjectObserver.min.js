(function (e, t) {
    "use strict";
    var n = function () {
        var e = {size: function () {
            return this.keys().length
        }, add: function (e, t) {
            return this.keys().push(e), this.values().push(t), this.get(e)
        }, remove: function (e) {
            var t = this.keys().indexOf(e);
            t >= 0 && (this.keys().splice(t, 1), this.values().splice(t, 1))
        }, get: function (e) {
            return this.values()[this.keys().indexOf(e)]
        }};
        return function () {
            var n = [], r = [];
            return t.create(e, {keys: {value: function () {
                return n
            }}, values: {value: function () {
                return r
            }}})
        }
    }();
    define([], function () {
        function r (n, r) {
            var i, s = n[r], o = t.getOwnPropertyDescriptor(n, r), u = o && o.set;
            t.defineProperty(n, r, {set: function (t) {
                u && u(t), t !== i && (e.get(n).get(r).forEach(function (e) {
                    e(t)
                }), i = t)
            }, get: function () {
                return i
            }}), n[r] = s
        }

        function i (e, t) {
            var n = e[t];
            delete e[t], e[t] = n
        }

        function s (t, i, s) {
            var o = e.get(t), u;
            o || (o = e.add(t, n())), u = o.get(i), u || (u = o.add(i, []), r(t, i)), u.indexOf(s) < 0 && u.push(s)
        }

        function o (t, n, r) {
            var s = e.get(t), o, u;
            if (!s)return;
            o = s.get(n);
            if (!o)return;
            u = o.indexOf(r), u >= 0 && o.splice(u, 1), o.length || (s.remove(n), i(t, n), s.size() || e.remove(t))
        }

        var e = n();
        return{observe: s, unobserve: o}
    })
})(window, Object);